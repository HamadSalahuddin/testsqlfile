/*
Script generated by Aqua Data Studio 8.0.2 on Jan-15-2010 01:50:27 PM
Database: TrackerPal
Schema: <All Schemas>
Objects: PROCEDURE
*/
CREATE PROCEDURE [DistributorGetByTamUserID]
	@UserID	int
AS
	SELECT	d.DistributorID, d.DistributorName, d.City, s.State
	FROM	Distributor d(NOLOCK)
	LEFT JOIN State s ON d.StateID = s.StateID
	LEFT JOIN User_Role ur ON d.TamID = ur.UserID
	--LEFT JOIN [Role] r ON r.RoleID = ur.RoleID
    WHERE	deleted = 0 AND
			ur.RoleID = 19 AND --19 = TAM
			ur.UserID = @UserID
	ORDER BY DistributorName
GO
GRANT VIEW DEFINITION ON [DistributorGetByTamUserID] TO [db_object_def_viewers]
GO
GRANT EXECUTE ON [DistributorGetByTamUserID] TO [db_dml]
GO
