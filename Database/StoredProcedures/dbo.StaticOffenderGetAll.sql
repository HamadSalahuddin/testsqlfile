/*
Script generated by Aqua Data Studio 8.0.2 on Jan-15-2010 01:50:28 PM
Database: TrackerPal
Schema: <All Schemas>
Objects: PROCEDURE
*/
CREATE PROCEDURE [StaticOffenderGetAll]



AS

BEGIN

	SET NOCOUNT ON;

	SELECT 
		o.OffenderID,
		o.SuffixID,
		o.SalutationID,
		o.FirstName,
		o.LastName,
		o.MiddleName,
		o.AgencyID,
		o.CreatedByID,
		o.ModifiedByID,
		o.OffenseTypeID,
		o.HomeStateOrProvinceID,
		o.OffenderNumber,
		o.Alias1,
		o.Alias2,
		o.Alias3,
		o.Notes,
		o.SSN,
		o.CaseNumber,
		o.FBINumber,
		o.RiskLevelID,
		ta.TrackerAssignmentID,
		ta.TrackerID,
		ta.CreatedBy as 'TrackerAssignmentCreatedBy',
		ta.SupervisionOfficerID,
		ta.AssignmentDate as 'TrackerAssignmentDate',
		oo.OfficerID,
		o.Deleted,
		o.Victim
	FROM 
		Offender o 
		LEFT JOIN TrackerAssignment ta ON ta.OffenderID = o.OffenderID 
			AND ta.TrackerAssignmentID = (SELECT MAX(TrackerAssignmentID) FROM TrackerAssignment ta WHERE ta.OffenderID = o.OffenderID)
		LEFT JOIN Offender_Officer oo ON oo.OffenderID = o.OffenderID

END
GO
GRANT EXECUTE ON [StaticOffenderGetAll] TO [db_dml]
GO
GRANT VIEW DEFINITION ON [StaticOffenderGetAll] TO [db_object_def_viewers]
GO
