/*
Script generated by Aqua Data Studio 8.0.2 on Jan-15-2010 01:50:27 PM
Database: TrackerPal
Schema: <All Schemas>
Objects: PROCEDURE
*/
CREATE PROCEDURE [BeaconGetByIdentifier]

@Identifier nvarchar(10)  
  
AS  
  
 SET NOCOUNT ON  
  
select b.id, b.Identifier, BeaconThresholdID ,  
       bo.OffenderID,o.Firstname+' '+o.LastName as 'OffenderName',  
       g.Longitude, g.Latitude  
from beacon  b  
inner join BeaconOffender bo on b.id=beaconID  
inner join OffenderBeaconThreshold t on t.OffenderID=bo.offenderID  
inner join Offender o ON o.Offenderid=bo.OffenderID  
inner join Address  a ON b.AddressID=a.ID    
INNER JOIN GPSLocation g ON g.AddressID = a.ID   
  
where identifier=@identifier




GO
GRANT EXECUTE ON [BeaconGetByIdentifier] TO [db_dml]
GO
