/*
Script generated by Aqua Data Studio 8.0.2 on Jan-15-2010 01:50:27 PM
Database: TrackerPal
Schema: <All Schemas>
Objects: PROCEDURE
*/
-- =============================================
-- Author:		Sajid Abbasi
-- Create date: 07-Dec-2009
-- Description:	The procedure adds GeoRuleLibrary item.
-- =============================================
CREATE PROCEDURE [GeoRuleLibraryAdd] (
        @GeoRuleLibraryItemID int output, 
        @GeoRuleGeoZoneID int, 
        @GeoRuleScheduleID int, 
        @RuleTypeID int, 
        @AgencyID int, 
        @CreatedByID int, 
        @ModifiedByID int, 
        @GeoRuleLibraryItemName varchar(50),
        @id int = 0
)
AS
BEGIN
  --SET NOCOUNT ON;
  IF @id = 0
    BEGIN
	  SELECT @id =  max(GeoRuleLibraryItemID) FROM GeoRuleLibrary
	  SET @id = ISNULL(@id,0)
	  SET @id = @id + 1
    END

  INSERT INTO GeoRuleLibrary(GeoRuleLibraryItemID, 
                             GeoRuleGeoZoneID, 
							 GeoRuleScheduleID,
							 RuleTypeID, 
			                 AgencyID,
			                 CreatedByID,
			                 ModifiedByID, 
		                     GeoRuleLibraryItemName
		                    )
  VALUES ( @id, 
           @GeoRuleGeoZoneID , 
		   @GeoRuleScheduleID, 
		   @RuleTypeID,  
		   @AgencyID, 
		   @CreatedByID, 
		   @ModifiedByID, 
		   @GeoRuleLibraryItemName
	     )
  SET @GeoRuleLibraryItemID = @id
END

GO
GRANT EXECUTE ON [GeoRuleLibraryAdd] TO [db_dml]
GO
