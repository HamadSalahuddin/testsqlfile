/*
Script generated by Aqua Data Studio 8.0.2 on Jan-15-2010 01:50:27 PM
Database: TrackerPal
Schema: <All Schemas>
Objects: PROCEDURE
*/
CREATE PROCEDURE [mTrackersAll]
AS
BEGIN

SELECT t.TrackerID, t.TrackerUniqueID, t.TrackerNumber, t.AgencyID,
	t.CreatedDate, t.CreatedByID, t.ModifiedDate, t.ModifiedByID,
	t.Deleted, t.IsDemo,

	t.BillableID, CASE WHEN tb.Status = 1 THEN CAST(1 AS bit) ELSE CAST(0 AS bit) END AS 'IsBillable',
	tb.CreatedByID AS 'Billable CreatedByID', tb.CreatedDate AS 'Billable CreatedDate',
	tb.AuthorizedByID AS 'Billable AuthorizedByID', tb.InvoiceNumber AS 'Billable InvoiceNumber',

	tr.RmaID, tr.CreatedByID AS 'RMA CreatedByID', tr.CreatedDate AS 'RMA CreatedDate',
	tr.TrackerRMAReasonID AS 'RMA ReasonID', tr.ReasonText AS 'RMA ReasonText',

    tv.ID AS 'VersionID', tv.VersionName AS 'VersionName'
FROM Tracker t 
	LEFT JOIN TrackerBillable tb ON t.BillableID = tb.TrackerBillableID
	LEFT JOIN TrackerRma tr ON t.RmaID = tr.RmaID AND tr.RemovedDate IS NULL
    LEFT JOIN TrackerVersion tv ON t.TrackerVersion = tv.ID
WHERE Deleted = 0



END



GO
GRANT EXECUTE ON [mTrackersAll] TO [db_dml]
GO
