/*
Script generated by Aqua Data Studio 8.0.2 on Jan-15-2010 01:50:27 PM
Database: TrackerPal
Schema: <All Schemas>
Objects: PROCEDURE
*/
CREATE PROCEDURE [EventGetLatestByDeviceID]
	@DeviceID int
AS
BEGIN

	SET NOCOUNT ON;

	SELECT top 1 [DeviceID]
      ,[EventTime]
      ,[EventID]
      ,[EventParameter]
      ,[GpsValid]
      ,[GpsValidSatellites]
      ,[GpsFixType]
      ,[GpsSatellites]
      ,ISNULL(ROUND([Latitude],5), 0) AS 'Latitude'
      ,ISNULL(ROUND([Longitude],5), 0) AS 'Longitude'
      ,[Speed]
      ,[Heading]
      ,[Altitude]
      ,[Hdop]
      ,[Vdop]
      ,[PDop]
      ,[InternalBatteryVoltage]
      ,[ExternalBatteryVoltage]
      ,[SignalStrength]
      ,[Status]
      ,[ReceivedTime]
      ,[TimeValid]
      ,[TransmittedTime]
      ,[StreetAddress]
	FROM  Gateway.dbo.Events E 
	WHERE DeviceID = @DeviceID
	ORDER BY EVENTTIME DESC
END


GO
GRANT VIEW DEFINITION ON [EventGetLatestByDeviceID] TO [db_object_def_viewers]
GO
GRANT EXECUTE ON [EventGetLatestByDeviceID] TO [db_dml]
GO
