/*
Script generated by Aqua Data Studio 8.0.2 on Jan-15-2010 01:50:27 PM
Database: TrackerPal
Schema: <All Schemas>
Objects: PROCEDURE
*/
CREATE PROCEDURE [OffenderGetBySearch]

	@FirstName	NVARCHAR(50),
	@LastName	NVARCHAR(50),
	@AgencyID	INT

AS


SELECT	o.OffenderID, o.FirstName, o.LastName, a.Agency
				FROM	Offender o
				LEFT JOIN Agency a ON o.AgencyID = a.AgencyID
				WHERE	(o.FirstName LIKE '%' + @FirstName + '%') AND
						(o.LastName Like '%' + @LastName + '%') AND
						(( @AgencyID = 0) or(o.AgencyID = @AgencyID)) AND
						o.Deleted = 0
				ORDER BY a.Agency, o.LastName, o.FirstName
GO
GRANT VIEW DEFINITION ON [OffenderGetBySearch] TO [db_object_def_viewers]
GO
GRANT EXECUTE ON [OffenderGetBySearch] TO [db_dml]
GO
