/*
Script generated by Aqua Data Studio 8.0.2 on Jan-15-2010 01:50:27 PM
Database: TrackerPal
Schema: <All Schemas>
Objects: PROCEDURE
*/
CREATE PROCEDURE [AlarmProtocolSetIsOwner]
	@AlarmProtocolSetID int
AS
BEGIN
	SET NOCOUNT ON;
SELECT a.AlarmProtocolSetID,a.AgencyID,a.OfficerID,a.CreatedByID,isnull(ur.RoleID,0) as 'RoleID'
FROM dbo.AlarmProtocolSet a
left join [User] u on u.UserID = a.CreatedByID
left JOIN User_Role ur ON u.UserID = ur.UserID
WHERE   AlarmProtocolSetID = @AlarmProtocolSetID
END


--	SELECT
--		COUNT(*) AS isOwner		
--	FROM    dbo.AlarmProtocolSet a
--	LEFT JOIN dbo.Officer o ON o.UserID = @CreatedByID
--	
--	WHERE   AlarmProtocolSetID = @AlarmProtocolSetID AND
--			(
--				a.CreatedByID=@CreatedByID 
--				OR
--				a.OfficerID = o.OfficerID
--			)
GO
GRANT VIEW DEFINITION ON [AlarmProtocolSetIsOwner] TO [db_object_def_viewers]
GO
GRANT EXECUTE ON [AlarmProtocolSetIsOwner] TO [db_dml]
GO
