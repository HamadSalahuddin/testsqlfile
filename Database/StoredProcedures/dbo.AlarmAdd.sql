/*
Script generated by Aqua Data Studio 8.0.2 on Jan-15-2010 01:50:26 PM
Database: TrackerPal
Schema: <All Schemas>
Objects: PROCEDURE
*/
CREATE PROCEDURE [AlarmAdd]
	
	@OffenderID			INT,
	@DeviceID			INT,
	@AlarmTypeID		INT,
	@EventTypeID		INT,
	@EventDisplayTime	DATETIME,
	@EventTime			BIGINT,
	@Latitude			FLOAT,
	@Longitude			FLOAT,
	@EventParameter		SMALLINT

AS
	
	IF @AlarmTypeID > 1
	BEGIN
		INSERT INTO Alarm
		(OffenderID, TrackerID, EventTypeID, EventTime, EventDisplayTime, 
		 AlarmTypeID, Latitude, Longitude, EventParameter)
		VALUES
		(@OffenderID, @DeviceID, @EventTypeID, @EventTime, @EventDisplayTime, 
		 @AlarmTypeID, @Latitude, @Longitude, @EventParameter)
	END
	return @@IDENTITY
GO
GRANT VIEW DEFINITION ON [AlarmAdd] TO [db_object_def_viewers]
GO
GRANT EXECUTE ON [AlarmAdd] TO [db_dml]
GO
