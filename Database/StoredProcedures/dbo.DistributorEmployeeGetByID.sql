/*
Script generated by Aqua Data Studio 8.0.2 on Jan-15-2010 01:50:27 PM
Database: TrackerPal
Schema: <All Schemas>
Objects: PROCEDURE
*/
CREATE PROCEDURE [DistributorEmployeeGetByID]
	@DistributorEmployeeID	INT,
	@GetDeleted BIT = 0
AS
BEGIN
	SET NOCOUNT ON;

	SELECT 	u.UserID AS 'DistributorEmployeeUserID',
			u.UserName,
			u.UserPassword,
			u.UserPassCode,
			ur.RoleID,
			de.DistributorEmployeeID, 			
			ISNULL(de.DistributorID, 0) AS 'DistributorID',
			ISNULL(de.Title,'') AS 'Title',
			ISNULL(de.Department,'') AS 'Department',
			ISNULL(de.SalutationID, '') AS 'SalutationID',
			ISNULL(de.FirstName, '') AS 'FirstName',
			ISNULL(de.MiddleName, '') AS 'MiddleName',
			ISNULL(de.LastName, '') AS 'LastName',
			ISNULL(de.SuffixID, '') AS 'SuffixID',
			ISNULL(de.StreetLine1,'') AS 'StreetLine1',
			ISNULL(de.StreetLine2,'') AS 'StreetLine2',
			ISNULL(de.City,'') AS 'City',
			ISNULL(de.StateID, 0) AS 'StateID',
			ISNULL(de.PostalCode,'') AS 'PostalCode',
			ISNULL(de.CountryID, 0) AS 'CountryID',
			ISNULL(de.DayPhone, '') AS 'DayPhone',
			ISNULL(de.ExtDayPhone, '') AS 'ExtDayPhone',
			ISNULL(de.EveningPhone, '') AS 'EveningPhone',
			ISNULL(de.ExtEveningPhone, '') AS 'ExtEveningPhone',
			ISNULL(de.MobilePhone, '') AS 'MobilePhone',
			ISNULL(de.Pager, '') AS 'Pager',
			ISNULL(de.Fax, '') AS 'Fax',
			ISNULL(de.EmailAddress, '') AS 'EmailAddress',
			ISNULL(de.EmailAddress2, '') AS 'EmailAddress2',
		     u.UserID AS 'UserID',
             u.UserTypeID,
             u.CreatedDate,
			 u.CreatedByID,
             u.ModifiedDate,
             u.ModifiedByID
	FROM DistributorEmployee de
	INNER JOIN [User] u ON de.UserID = u.UserID
	INNER JOIN User_Role ur ON u.UserID = ur.UserID
	WHERE DistributorEmployeeID = @DistributorEmployeeID AND (@GetDeleted = 1 OR de.Deleted = 0)

END

GO
GRANT VIEW DEFINITION ON [DistributorEmployeeGetByID] TO [db_object_def_viewers]
GO
GRANT EXECUTE ON [DistributorEmployeeGetByID] TO [db_dml]
GO
