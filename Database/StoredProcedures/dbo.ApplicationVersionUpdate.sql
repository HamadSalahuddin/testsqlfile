/*
Script generated by Aqua Data Studio 8.0.2 on Jan-15-2010 01:50:27 PM
Database: TrackerPal
Schema: <All Schemas>
Objects: PROCEDURE
*/
CREATE PROCEDURE [ApplicationVersionUpdate]
@UserID int,
@ApplicationVersion nvarchar(50) = null

AS
BEGIN
        SET NOCOUNT ON;
        IF (SELECT Count(*) FROM dbo.UserPreferences WHERE UserID = @UserID) > 0
                BEGIN
                UPDATE dbo.UserPreferences
                SET
                ApplicationVersion = @ApplicationVersion      
                WHERE UserID = @UserID
        END
        ELSE
                BEGIN
                INSERT INTO dbo.UserPreferences (UserID, ApplicationVersion)
                VALUES(@UserID, @ApplicationVersion)
        END

END

GO
GRANT VIEW DEFINITION ON [ApplicationVersionUpdate] TO [db_object_def_viewers]
GO
GRANT EXECUTE ON [ApplicationVersionUpdate] TO [db_dml]
GO
