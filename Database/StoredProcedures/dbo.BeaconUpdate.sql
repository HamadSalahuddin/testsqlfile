/*
Script generated by Aqua Data Studio 8.0.2 on Jan-15-2010 01:50:27 PM
Database: TrackerPal
Schema: <All Schemas>
Objects: PROCEDURE
*/
CREATE PROCEDURE [BeaconUpdate]  
  
 @ID                 INT ,   
 @Identifier         NVARCHAR(50),  
 @BeaconName         NVARCHAR(50),  
 @Street1            NVARCHAR(50),  
 @Street2            NVARCHAR(50),  
 @City               NVARCHAR(50),  
 @StateID            INT,  
 @Latitude           FLOAT,  
 @Longitude          FLOAT,  
 @ZipCode            NVARCHAR(25),  
 @OffenderID         INT,  
 @BeaconThresholdID  INT  
  
  
AS  
DECLARE @AddressID INT  
SET @AddressID=(Select AddressID from Beacon where ID=@ID)  
BEGIN  
  
 UPDATE  dbo.Beacon  
 SET   Identifier = @Identifier,      
       BeaconName = @BeaconName     
 WHERE ID = @ID  
  
  
 UPDATE  dbo.Address  
 SET   Street1 = @Street1,  
       Street2 = @Street2,  
       ZipCode = @ZipCode,  
       City = @City,  
       StateID = @StateID     
 WHERE  ID = @AddressID  
  
  
 UPDATE   dbo.GPSLocation  
 SET      Longitude=@Longitude,  
          Latitude=@Latitude  
 WHERE    AddressID=@AddressID  
     
 UPDATE dbo.OffenderBeaconThreshold    
 SET BeaconThresholdID=@BeaconThresholdID   
 WHERE OffenderID=@OffenderID

END  


GO
GRANT EXECUTE ON [BeaconUpdate] TO [db_dml]
GO
