/*
Script generated by Aqua Data Studio 8.0.2 on Jan-15-2010 01:24:57 PM
Database: TrackerPal
Schema: <All Schemas>
Objects: TRIGGER
*/
CREATE TRIGGER [dbo].[trgOffenderNameUpdate]  ON dbo.Offender AFTER UPDATE
AS 
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;
	DECLARE @OffenderID int
	set @OffenderID=(SELECT OffenderID FROM inserted)
	
	IF UPDATE(FirstName) OR UPDATE(LastName)OR UPDATE(MiddleName)
	BEGIN 
		DECLARE @FirstName nvarchar(50)
		DECLARE @LastName nvarchar(50)
		DECLARE @MiddleName nvarchar(20)
		set @FirstName=(SELECT FirstName from inserted)
		set @LastName=(SELECT LastName from inserted)
		set @MiddleName=(SELECT LastName from inserted)
		

		UPDATE rprtEventsBucket2 SET OffenderName=@FirstName+' '+@MiddleName+' '+@LastName WHERE  OffenderID=@OffenderID
		UPDATE rprtEventsBucket1 SET OffenderName=@FirstName+' '+@MiddleName+' '+@LastName WHERE  OffenderID=@OffenderID
		
    -- Insert statements for trigger here
	END
END
GO
